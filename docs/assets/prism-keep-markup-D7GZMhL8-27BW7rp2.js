(function(){typeof Prism>"u"||typeof document>"u"||!document.createRange||(Prism.plugins.KeepMarkup=!0,Prism.hooks.add("before-highlight",function(t){if(!t.element.children.length||!Prism.util.isActive(t.element,"keep-markup",!0))return;var s=Prism.util.isActive(t.element,"drop-tokens",!1);function a(n){return!(s&&n.nodeName.toLowerCase()==="span"&&n.classList.contains("token"))}var e=0,d=[];function p(n){if(!a(n)){o(n);return}var r={element:n,posOpen:e};d.push(r),o(n),r.posClose=e}function o(n){for(var r=0,l=n.childNodes.length;r<l;r++){var i=n.childNodes[r];i.nodeType===1?p(i):i.nodeType===3&&(e+=i.data.length)}}o(t.element),d.length&&(t.keepMarkup=d)}),Prism.hooks.add("after-highlight",function(t){if(t.keepMarkup&&t.keepMarkup.length){var s=function(a,e){for(var d=0,p=a.childNodes.length;d<p;d++){var o=a.childNodes[d];if(o.nodeType===1){if(!s(o,e))return!1}else o.nodeType===3&&(!e.nodeStart&&e.pos+o.data.length>e.node.posOpen&&(e.nodeStart=o,e.nodeStartPos=e.node.posOpen-e.pos),e.nodeStart&&e.pos+o.data.length>=e.node.posClose&&(e.nodeEnd=o,e.nodeEndPos=e.node.posClose-e.pos),e.pos+=o.data.length);if(e.nodeStart&&e.nodeEnd){var n=document.createRange();return n.setStart(e.nodeStart,e.nodeStartPos),n.setEnd(e.nodeEnd,e.nodeEndPos),e.node.element.innerHTML="",e.node.element.appendChild(n.extractContents()),n.insertNode(e.node.element),n.detach(),!1}}return!0};t.keepMarkup.forEach(function(a){s(t.element,{node:a,pos:0})}),t.highlightedCode=t.element.innerHTML}}))})();
